<html>
<head>
<title>Tutorial about using wo2009 mvc</title>
<link rel="stylesheet" type="text/css" href="../media/style.css">
</head>
<body>

<table border="0" cellspacing="0" cellpadding="0" height="48" width="100%">
  <tr>
    <td class="header_top">wo2009</td>
  </tr>
  <tr><td class="header_line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
  <tr>
    <td class="header_menu">
        
                                    
                              		  [ <a href="../classtrees_wo2009.html" class="menu">class tree: wo2009</a> ]
		  [ <a href="../elementindex_wo2009.html" class="menu">index: wo2009</a> ]
		  	    [ <a href="../elementindex.html" class="menu">all elements</a> ]
    </td>
  </tr>
  <tr><td class="header_line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="250" class="menu">
      <b>Packages:</b><br />
              <a href="../li_wo2009.html">wo2009</a><br />
            <br /><br />
		<b>Tutorials/Manuals:</b><br />
					<strong>Package-level:</strong>
							<ul>
	<li type="square"><a href="../wo2009/tutorial_wo2009.pkg.html">Tutorial about using wo2009 framework</a>
<ul>
	<li type="square"><a href="../wo2009/tutorial_wo2009.library.pkg.html">Tutorial about using wo2009 library</a>
</ul>
<ul>
	<li type="square"><a href="../wo2009/tutorial_wo2009.mvc.pkg.html">Tutorial about using wo2009 mvc</a>
</ul>
<ul>
	<li type="square"><a href="../wo2009/tutorial_language.pkg.html">Language</a>
</ul>
<ul>
	<li type="square"><a href="../wo2009/tutorial_somerow.pkg.html">Somerow</a>
</ul>
<ul>
	<li type="square"><a href="../wo2009/tutorial_mastertemplate.pkg.html">Mastertemplate</a>
</ul>
<ul>
	<li type="square"><a href="../wo2009/tutorial_accesscontrol.pkg.html">Access Control</a>
</ul>
</li></ul>

									                        <b>Files:</b><br />
      	  <div class="package">
			<a href="../wo2009/_includes---defines.php.html">		defines.php
		</a><br>
			<a href="../wo2009/_error.php.html">		error.php
		</a><br>
			<a href="../wo2009/_includes---errorhandler.php.html">		errorhandler.php
		</a><br>
			<a href="../wo2009/_index.php.html">		index.php
		</a><br>
			<a href="../wo2009/_library---loader.php.html">		loader.php
		</a><br>
			<a href="../wo2009/_includes---someexception.php.html">		someexception.php
		</a><br>
	  </div><br />
	subpackage <b>exception</b><br>  <div class="package">
			<a href="../wo2009/exception/_library---some---exception---classnotfoundexception.php.html">		classnotfoundexception.php
		</a><br>
			<a href="../wo2009/exception/_library---some---exception---databaseexception.php.html">		databaseexception.php
		</a><br>
			<a href="../wo2009/exception/_library---some---exception---filenotfoundexception.php.html">		filenotfoundexception.php
		</a><br>
			<a href="../wo2009/exception/_library---some---exception---frameworkexception.php.html">		frameworkexception.php
		</a><br>
	  </div><br />
	subpackage <b>library</b><br>  <div class="package">
			<a href="../wo2009/library/_library---some---application---application.php.html">		application.php
		</a><br>
			<a href="../wo2009/library/_library---some---common.php.html">		common.php
		</a><br>
			<a href="../wo2009/library/_library---some---configuration---configuration.php.html">		configuration.php
		</a><br>
			<a href="../wo2009/library/_library---some---cookie---cookie.php.html">		cookie.php
		</a><br>
			<a href="../wo2009/library/_library---some---csrf---csrf.php.html">		csrf.php
		</a><br>
			<a href="../wo2009/library/_library---some---database---database.php.html">		database.php
		</a><br>
			<a href="../wo2009/library/_library---some---session---storage---database.php.html">		database.php
		</a><br>
			<a href="../wo2009/library/_library---some---database---rows---demo.php.html">		demo.php
		</a><br>
			<a href="../wo2009/library/_library---some---document---documenthtml.php.html">		documenthtml.php
		</a><br>
			<a href="../wo2009/library/_library---some---factory.php.html">		factory.php
		</a><br>
			<a href="../wo2009/library/_library---some---session---storage---file.php.html">		file.php
		</a><br>
			<a href="../wo2009/library/_library---some---filter---filterinput.php.html">		filterinput.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---application---iapplication.php.html">		iapplication.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---configuration---iconfiguration.php.html">		iconfiguration.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---cookie---icookie.php.html">		icookie.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---database---idatabase.php.html">		idatabase.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---document---idocumenthtml.php.html">		idocumenthtml.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---ifactory.php.html">		ifactory.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---language---ilanguage.php.html">		ilanguage.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---database---irow.php.html">		irow.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---session---isession.php.html">		isession.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---session---istorage.php.html">		istorage.php
		</a><br>
			<a href="../wo2009/library/_interface---library---some---user---iuser.php.html">		iuser.php
		</a><br>
			<a href="../wo2009/library/_library---some---language---language.php.html">		language.php
		</a><br>
			<a href="../wo2009/library/_library---some---session---storage---mysql.php.html">		mysql.php
		</a><br>
			<a href="../wo2009/library/_library---some---database---driver---pdomysql.php.html">		pdomysql.php
		</a><br>
			<a href="../wo2009/library/_library---some---database---driver---pdopostgres.php.html">		pdopostgres.php
		</a><br>
			<a href="../wo2009/library/_library---some---rbac---rbac.php.html">		rbac.php
		</a><br>
			<a href="../wo2009/library/_library---some---environment---request.php.html">		request.php
		</a><br>
			<a href="../wo2009/library/_library---some---environment---response.php.html">		response.php
		</a><br>
			<a href="../wo2009/library/_library---some---database---row.php.html">		row.php
		</a><br>
			<a href="../wo2009/library/_library---some---database---rows---session.php.html">		session.php
		</a><br>
			<a href="../wo2009/library/_library---some---session---session.php.html">		session.php
		</a><br>
			<a href="../wo2009/library/_library---some---session---storage.php.html">		storage.php
		</a><br>
			<a href="../wo2009/library/_library---some---database---rows---user.php.html">		user.php
		</a><br>
			<a href="../wo2009/library/_library---some---user---user.php.html">		user.php
		</a><br>
	  </div><br />
	subpackage <b>mvc</b><br>  <div class="package">
			<a href="../wo2009/mvc/_library---some---application---controller.php.html">		controller.php
		</a><br>
			<a href="../wo2009/mvc/_interface---library---some---application---icontroller.php.html">		icontroller.php
		</a><br>
			<a href="../wo2009/mvc/_interface---library---some---application---imodel.php.html">		imodel.php
		</a><br>
			<a href="../wo2009/mvc/_interface---library---some---application---iview.php.html">		iview.php
		</a><br>
			<a href="../wo2009/mvc/_library---some---application---model.php.html">		model.php
		</a><br>
			<a href="../wo2009/mvc/_library---some---application---view.php.html">		view.php
		</a><br>
	  </div><br />
      
            <b>Interfaces:</b><br />
        <div class="package">
	library<br />	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeApplication.html">ISomeApplication</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeConfiguration.html">ISomeConfiguration</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeCookie.html">ISomeCookie</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeDatabase.html">ISomeDatabase</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeDocumentHTML.html">ISomeDocumentHTML</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeFactory.html">ISomeFactory</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeLanguage.html">ISomeLanguage</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeRow.html">ISomeRow</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeSession.html">ISomeSession</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeSessionStorage.html">ISomeSessionStorage</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/ISomeUser.html">ISomeUser</a><br />
	  </div>
  <div class="package">
	mvc<br />	    &nbsp;&nbsp;		<a href="../wo2009/mvc/ISomeController.html">ISomeController</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/mvc/ISomeModel.html">ISomeModel</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/mvc/ISomeView.html">ISomeView</a><br />
	  </div>
      
            <b>Classes:</b><br />
        <div class="package">
	library<br />	    &nbsp;&nbsp;		<a href="../wo2009/library/JFilterInput.html">JFilterInput</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeApplication.html">SomeApplication</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeAuth.html">SomeAuth</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeConfiguration.html">SomeConfiguration</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeCookie.html">SomeCookie</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeCSRF.html">SomeCSRF</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeDatabase.html">SomeDatabase</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeDatabasePdomysql.html">SomeDatabasePdomysql</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeDatabasePdopostgres.html">SomeDatabasePdopostgres</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeDocumentHTML.html">SomeDocumentHTML</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeFactory.html">SomeFactory</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeLanguage.html">SomeLanguage</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeRbac.html">SomeRbac</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeRequest.html">SomeRequest</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeResponse.html">SomeResponse</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeRow.html">SomeRow</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeRowDemo.html">SomeRowDemo</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeRowSession.html">SomeRowSession</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeRowUser.html">SomeRowUser</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeSession.html">SomeSession</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeSessionStorage.html">SomeSessionStorage</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeSessionStorageDatabase.html">SomeSessionStorageDatabase</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeSessionStorageFile.html">SomeSessionStorageFile</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeSessionStorageMysql.html">SomeSessionStorageMysql</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeText.html">SomeText</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/library/SomeUser.html">SomeUser</a><br />
	  </div>
  <div class="package">
	exception<br />	    &nbsp;&nbsp;		<a href="../wo2009/exception/SomeClassNotFoundException.html">SomeClassNotFoundException</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/exception/SomeDatabaseException.html">SomeDatabaseException</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/exception/SomeFileNotFoundException.html">SomeFileNotFoundException</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/exception/SomeFrameworkException.html">SomeFrameworkException</a><br />
	  </div>
  <div class="package">
	mvc<br />	    &nbsp;&nbsp;		<a href="../wo2009/mvc/SomeController.html">SomeController</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/mvc/SomeModel.html">SomeModel</a><br />
	    &nbsp;&nbsp;		<a href="../wo2009/mvc/SomeView.html">SomeView</a><br />
	  </div>
  <div class="package">
		    		<a href="../wo2009/SomeException.html">SomeException</a><br />
	    		<a href="../wo2009/SomeLoader.html">SomeLoader</a><br />
	  </div>
                </td>
    <td>
      <table cellpadding="10" cellspacing="0" width="100%" border="0"><tr><td valign="top">

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="10%" align="left" valign="bottom"><a href=
"../wo2009/tutorial_wo2009.library.pkg.html">Prev</a></td>
<td width="80%" align="center" valign="bottom"></td>
<td width="10%" align="right" valign="bottom"><a href=
"../wo2009/tutorial_language.pkg.html">Next</a></td>
</tr>
</table>
<div><a name=""></a><div class="ref-title-box"><h1 class="ref-title">Tutorial about using wo2009 mvc</h1>
		<h2 class="ref-purpose">This tutorial explains how to use wo2009 mvc to extend
			your own content. This tutorial is final, as MVC does not evolve over
			time.</h2></div>
	<div class="ref-synopsis"><span class="author">Hannu Lohtander
			<div class="author-blurb"><a href="mailto:hannu.lohtander@uta.fi">hannu.lohtander@uta.fi</a></div></span></div>
	<span><a name="intro"></a><p>MVC model is basic rendering model, that separates control flow,
			application data handling and presentation to separate classes.</p>
		<p>Control flow is handled by Controller. Control flow means the
			decision making, that guides the part of the content that is
			rendered. If the content is forum application, the possible choices
			are: listing forum areas, listing topics in an area, single topic,
			etc. It is up to Controller to know, what model and view it is going
			to use with a request.</p>
		<p>Model is place for the data warehouse and data logic. In our forum application, it
			would handle fetching data from database, and does what ever is
			needed to do, before it can be received by the view.</p>
		<p>View is the display, the xhtml generator of the three. It gets Model as
			its helper, and it gets all the data from it. This is the only place,
			where html code is generated. And also only place where output
			functions (echo, print, sprintf, ...) are used!</p>
		<p>Execution flow in mvc model is: Controller is executed. It fetches some
			parameter from request (usually 'view'), and knows what Model to get
			- it gets it. It then asks model to do any processing model wants to do.
			When model is ready, Controller creates View. It gives Model to View and
			asks View to diplay content. What ever content is echoed, gets
			buffered by Front Controller inside its dispatch method.</p></span>
	<span><a name="naming"></a><p>SomeController implements few methods, that can be used to control 
			flow and load Model and View. Rules for methods and parameters are:</p>
		<p>Controller extending from SomeController, must have display method.
			If there is view parameter in url, then corresponding method is
			called. If view is view=start, calling execute will call start.</p>
			<p>Calling from controller getModel('default') means, that model must be
			in file model/default.php AND its name must be SomeModelDefault.</p>
			<p>Calling from controller getView('default') means, that view must be
			in file view/default/default.php and its name must be
			SomeViewDefault</p>
			<p>Template name given to SomeView::display must be file in folder tmpl/. 
			Usually this display($tmpl) is called from extending class SomeViewSuffix.</p></span>
	
	<span><a name="example2"></a><p>This is step by step guide to create Hello World mvc module skeleton classes.</p>
		<p>For simplest possible framework you need to do 1 Controller, 1 Model,
			1 View and 1 template file. You need also 1 content bootstrap. This
			example is content 'hello'. It has 2 views. Files are:</p>
			<blockquote><p>content/hello/hello.php - the bootstrap, initiates controller
				<br />
				content/hello/controller/hello.php - the controller
				SomeControllerHello, initiates model and view
				<br />
				content/model/hello.php - the model SomeModelHello
				<br />
				content/hello/view/default/default.php - the view SomeViewDefault
				<br />
				content/hello/view/default/tmpl/default.php
				<br />
				content/hello/view/date/date.php - the view SomeViewDate
				<br />
				content/hello/view/date/tmpl/default.php
				<br /></p></blockquote>
		<a name="example2.hellobootstrap"></a><p>Hello world bootstrap creates controller. The name of the controller
				file and Controller class name can be freely selected. It is good
				convention to name controller with name like SomeControllerDefault
				or with content name - SomeControllerHello. What ever the name is,
				controller(s) are placed to subfolder controller/.</p>
			<div class="src-code"><pre>
content/hello/hello.php - the bootstrap
content/hello/controller/hello.php - the controller SomeControllerHello		
			</pre></div>
			<p>Controller must extend frameworks baseclass SomeController 
				some.application.controller, because SomeController implements
				execute(), getModel and getView methods. Those are then available at
				the extending controller. Code to create and execute
				SomeControllerHello is:
				<ol><li><div class="src-line"><span class="src-comm">//this&nbsp;file&nbsp;is&nbsp;content/hello/hello.php</span></div></li>
<li><div class="src-line"><span class="src-inc">include</span><span class="src-sym">(</span><span class="src-id">CONTENT_PATH</span>.<span class="src-id">DS</span>.<span class="src-str">'controller'</span>.<span class="src-id">DS</span>.<span class="src-str">'hello.php'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$controller&nbsp;</span>=&nbsp;<span class="src-id">SomeControllerHello</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$controller</span><span class="src-sym">-&gt;</span><span class="src-id">execute</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol></p>
			<p>Nothing more is needed to start executing mvc module code.
					CONTENT_PATH is one example of constants that are available in wo2009 as to be
					used in code in the extensions.</p><hr />

		<a name="example2.hellocontroller"></a><p>Hello world controller is named - name can be freely selected -
				SomeControllerHello. Some Controller must have at least one method,
				public function display(); Controller must extend from
				SomeController.
				<ol><li><div class="src-line"><a href="../wo2009/_library---loader.php.html#functionsomeloader">someloader</a><span class="src-sym">(</span><span class="src-str">'some.application.controller'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-key">class&nbsp;</span><span class="src-id">SomeControllerHello&nbsp;</span><span class="src-key">extends&nbsp;</span><a href="../wo2009/mvc/SomeController.html">SomeController</a>&nbsp;<span class="src-sym">{</span><span class="src-sym">}</span></div></li>
</ol>
				If controller has constructor, it must have the same definition as
				ISomeController:
				<div class="src-code"><pre>
//interface ISomeController
public function __construct();
				</pre></div>
				Although it is not mandatory, it is good policy to call
				parent::__construct() from exending class, to allow parent to
				construct itself:
				<div class="src-code"><pre>
public function __construct() { parent::__construct(); }
				</pre></div></p>
			<p>Extensions Controller can and usually have more methods than
				mandatory display. These are named after parameter &quot;view&quot; expected to be in the url. Hello world
				example have showdate() method. This methods is called by
				SomeController, when http URL has view=showdate parameter.</p><hr />

		<a name="example2.hellomodel"></a><p>Hello world model is named so, that it starts with SomeModel, and
				has suffix that comes from SomeController-&gt;getModel(name); name
				-argument value is the suffix. Callind $controller-&gt;getView('hello') tries to find
				from folder content/hello/model the file content/hello/model/hello.php class named
				SomeModelHello.
				<ol><li><div class="src-line"><span class="src-comm">//controller&nbsp;method&nbsp;display()</span></div></li>
<li><div class="src-line"><span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><a href="../wo2009/mvc/SomeView.html#methoddisplay">display</a><span class="src-sym">(</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../wo2009/mvc/SomeView.html#methodgetModel">getModel</a><span class="src-sym">(</span><span class="src-str">'hello'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
</ol>
				If model has constructor (, it does not have to have one,) it must
				have the same definition as ISomeModel:
				<div class="src-code"><pre>
//interface ISomeModel
public function __construct(array $options = array());
				</pre></div>
				Although it is not mandatory, it is good policy to call
				parent::__construct() from exending class, to allow parent to
				construct itself:
<div class="src-code"><pre>
public function __construct(array $options=array() ) {
	parent::__construct($options); 
}
</pre></div></p>
			<p>There are no rules for how to use model. There can not be such rules, because that is
			always extension specific. SomeModelHello has two
				methods, getHello() ja getDate(). One model serves both our views.</p><hr />

		<a name="example2.helloview"></a><p>Hello world view is named so, that it starts with SomeView, and has
				suffix that comes from SomeController-&gt;getView(name) name
				-argument. Callind $controller-&gt;getView('default') will try to find
				from folder content/hello/view/default file content/hello/view/default/default.php, having class
				named SomeViewDefault. Each view is in its own subfolder, view
				SomeViewDate, fetched using SomeController-&gt;getView('date'), must be
				in file content/hello/view/date/date.php.
				<ol><li><div class="src-line"><span class="src-comm">//controller&nbsp;method&nbsp;display()</span></div></li>
<li><div class="src-line"><span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><a href="../wo2009/mvc/SomeView.html#methoddisplay">display</a><span class="src-sym">(</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../wo2009/mvc/SomeView.html#methodgetModel">getModel</a><span class="src-sym">(</span><span class="src-str">'hello'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getView</span><span class="src-sym">(</span><span class="src-str">'default'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//controller&nbsp;method&nbsp;showdate()</span></div></li>
<li><div class="src-line"><span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><span class="src-id">showdate</span><span class="src-sym">(</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../wo2009/mvc/SomeView.html#methodgetModel">getModel</a><span class="src-sym">(</span><span class="src-str">'hello'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getView</span><span class="src-sym">(</span><span class="src-str">'date'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
</ol>
				If view has constructor, it does not have to have one, it must have
				the same definition as ISomeView:
				<div class="src-code"><pre>
//interface ISomeView
public function __construct(array $options = array());
				</pre></div>
				Although it is not mandatory, it is good policy to call
				parent::__construct() from exending class, to allow parent to
				construct itself:
				<ol><li><div class="src-line"><span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><a href="../wo2009/mvc/SomeView.html#method__construct">__construct</a><span class="src-sym">(</span><span class="src-key">array&nbsp;</span><span class="src-var">$options</span>=<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)&nbsp;)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-id">parent</span><span class="src-sym">::</span><span class="src-id">__construct</span><span class="src-sym">(</span><span class="src-var">$options</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
</ol></p>
			<p>There are no rules for how to use model. SomeViewDate and
				SomeViewDefault has only one method -display(). Controller calls it
				after it has joined View with Model:
				<ol><li><div class="src-line"><span class="src-comm">//controller&nbsp;method&nbsp;showdate()</span></div></li>
<li><div class="src-line"><span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><span class="src-id">showdate</span><span class="src-sym">(</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../wo2009/mvc/SomeView.html#methodgetModel">getModel</a><span class="src-sym">(</span><span class="src-str">'hello'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getView</span><span class="src-sym">(</span><span class="src-str">'date'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$view</span><span class="src-sym">-&gt;</span><a href="../wo2009/mvc/SomeView.html#methodsetModel">setModel</a><span class="src-sym">(</span><span class="src-var">$model</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$view</span><span class="src-sym">-&gt;</span><a href="../wo2009/mvc/SomeView.html#methoddisplay">display</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
</ol></p>
			<p>Reason for joining model with view is, that model is the only
				source for data, that view uses. It does not get data from
				request, post, files or session directly, everything is fetched and
				prepared by the model.</p>
			<p>View first get data from model, and then uses parent class
				SomeView to get html template file to generate final xhtml from data. Parent SomeView
				will do this, and tries to find template form folder
				view/default/tmpl or /view/data/tmpl, which ever is currently used.
				Template name is default.php or it can be given as parameter to
				parent::display($tmpl) method. Method parent::display($tmpl) MUST be
				called from view, or no xhtml is generated.</p>
			<ol><li><div class="src-line"><span class="src-comm">//SomeViewDate&nbsp;or&nbsp;SomeViewDefault&nbsp;method&nbsp;display(tmpl='default')</span></div></li>
<li><div class="src-line"><span class="src-key">public&nbsp;</span><span class="src-key">function&nbsp;</span><a href="../wo2009/mvc/SomeView.html#methoddisplay">display</a><span class="src-sym">(</span><span class="src-var">$tmpl</span>=<span class="src-id">null</span><span class="src-sym">)&nbsp;</span><span class="src-sym">{</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$model&nbsp;</span>=&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../wo2009/mvc/SomeView.html#methodgetModel">getModel</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">hello&nbsp;</span>=&nbsp;<span class="src-var">$model</span><span class="src-sym">-&gt;</span><span class="src-id">getHello</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-id">parent</span><span class="src-sym">::</span><span class="src-id">display</span><span class="src-sym">(</span><span class="src-var">$tmpl</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-sym">}</span></div></li>
</ol>
			<p>SomeView::display($tmpl) includes template file, which output
				html. Template can have if, while, for, foreach and other function
				calls, conditionals or looping structures, but it must not have eg.
				function declarations. That is bad practise.</p><hr />

		<a name="example2.hellolisting"></a><div class="cmd-synopsis"><pre>
------
&lt;?php
//this is content/hello/hello.php
include(PATH_CONTENT.DS.'controller'.DS.'hello.php');
$controller = new SomeControllerHello();
$controller-&gt;execute();
?&gt;
------
//this is file content/hello/controller/hello.php
&lt;?php
someloader('some.application.controller');

class SomeControllerHello extends SomeController {

	public function __construct() {
		parent::__construct();
	}
	
	public function display() {
		$model = $this-&gt;getModel('default');
		$view = $this-&gt;getView('default');
		$view-&gt;setModel($model);
		$view-&gt;display();
	}
	
	public function showdate() {
		$model = $this-&gt;getModel('default');
		$view = $this-&gt;getView('date');
		$view-&gt;setModel($model);
		$view-&gt;display();
	}
}
?&gt;
------
//this is only model, SomeModelDefault /content/hello/model/default.php
&lt;?php
someloader('some.application.model');

class SomeModelDefault extends SomeModel {

	public function __construct(array $options=array()) {
		parent::__construct($options);
	}
	
	public function getHello() {
		return &quot;Hello&quot;;
	}
	
	public function getDate() {
		return date('d.m.Y',time());
	}}
?&gt;
------
//the first from two views, content/hello/view/default/default.php
&lt;?php
someloader('some.application.view');

class SomeViewDefault extends SomeView {

	public function display($tmpl=null) {
		$model = $this-&gt;getModel();
		$this-&gt;hello = $model-&gt;getHello();
		parent::display();
	}}
?&gt;

------

//template of the default view. content/hello/view/default/tmpl/default.php
&lt;?php
echo $this-&gt;hello;
?&gt;
&lt;hr&gt;
&lt;a href='index.php?app=hello&amp;view=showdate'&gt;see date&lt;/a&gt;
------
//second from the two views, content/hello/view/date/date.php

&lt;?php
someloader('some.application.view');

class SomeViewDate extends SomeView {

	public function display($tmpl=null) {
		$model = $this-&gt;getModel();
		$this-&gt;date = $model-&gt;getDate();
		parent::display();
	}}
?&gt;
------
//template of the date view content/hello/view/date/tmpl/default.php

&lt;?php
echo $this-&gt;date;
?&gt;
&lt;hr&gt;
&lt;a href='index.php?app=hello'&gt;see hello&lt;/a&gt;

</pre></div><hr /></span>
	<span><a name="helpings"></a><p>MVC model gets contants and objects from framework. You can find
			all of those in documentation, but here a some examples.</p>
		<div class="src-code"><pre>
These constants are defined in includes/defines.php

SOME_PATH - the absolute path to index.php folder, the root of the framework
SOME_LIBRARY - SOME_PATH's subfolder library.
SOME_CONTENT - path to content/ folder.

PATH_CONTENT - defined in SomeApplication-&gt;dispatch to be absolutepath of dispatch'ed content
			
These classes are used in contents.

$session = SomeFactory::getSession;
$session-&gt;set('colors', array('red','blue'));
$colors = $session-&gt;get('colors',array());

$safe_int = SomeRequest::getInt('x');
$safe_float = SomeRequest::getFloat('x');
$safe_string = SomeRequest::getString('x');
$safe_string2 = SomeRequest::getVar('x','default');
$safe_alphanumeric = SomeRequest::getCmd('x','default');

$application = SomeRequest::getApplication(); //the SomeApplication instance
$application-&gt;redirect('index.php?app=login'); //redirects browser to url

$conf = SomeApplication::getConfiguration();
$session_handler = $conf-&gt;get('session_handler','session');
		</pre></div></span></div>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="../wo2009/tutorial_wo2009.library.pkg.html">Prev</a></td>
<td width="34%" align="center" valign="top"><a href=
"../wo2009/tutorial_wo2009.pkg.html">Up</a></td>
<td width="33%" align="right" valign="top"><a href=
"../wo2009/tutorial_language.pkg.html">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">Tutorial about using wo2009 library</td>
<td width="34%" align="center" valign="top">Tutorial about using wo2009 framework</td>
<td width="33%" align="right" valign="top">Language</td>
</tr>
</table>
        <div class="credit">
		    <hr />
		    Documentation generated on Mon, 25 Oct 2010 19:03:53 +0300 by <a href="http://www.phpdoc.org">phpDocumentor 1.4.3</a>
	      </div>
      </td></tr></table>
    </td>
  </tr>
</table>

</body>
</html>